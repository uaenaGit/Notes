---
created: 2026-02-23 12:26
tags:
  - debug
  - issue
  - troubleshooting
status: 🔴 进行中
priority: ⭐⭐⭐
---

# 🐛 问题调试记录

## 📋 问题概述
**标题**: 运行.`exe`文件后，控制台输出中文乱码
**发现时间**: 2026-02-23
**影响范围**: 当前文件

## 📝 问题描述
<!-- 详细描述遇到的问题，包括预期行为和实际行为 -->
vscode 运行 `.exe`文件后，中文输出乱码。

## 🖥️ 环境信息
| 项目   | 信息        |
| ---- | --------- |
| 操作系统 | Windows11 |
| 软件版本 | 1.109.5   |
| 相关依赖 | 无         |
| 硬件配置 | 待补充       |

## 📝 错误日志（或截图）
![[Pasted image 20260223123025.png]]


## ✅ 已尝试的解决方案
| 序号  | 方案      | 结果   | 时间              |
| --- | ------- | ---- | --------------- |
| 1   | 加入控制行命令 | ✅ 成功 | 2026/2/23 12:23 |
| 2   |         |      |                 |
| 3   |         |      |                 |

## 🔬 原因分析

1. **VSCode 编辑器**：默认使用 `UTF-8` 编码保存文件，所以你的代码 `"运算后结果："` 在编辑器里显示正常。
2. **Windows 终端 (PowerShell/CMD)**：默认使用 `GBK` (代码页 936) 编码来显示字符。
3. **冲突点**：程序运行时，编译器将 `UTF-8` 的中文直接输出到了期待 `GBK` 的终端，导致字节解析错误，变成了乱码（如截图中的“杩愮畻...”）。

## 💡 最终解决方案
<!-- 记录最终解决问题的方法 -->
<!-- 修改前代码 -->
```cpp
#include <iostream>
using namespace std;
  
int main() {
    int n = 1 & 0 == 1;
    cout << "运算后结果："  << n << endl;
    return 0;
}
```

<!-- 修改后代码 -->
```cpp
#include <iostream>
#include <windows.h> // 1. 引入头文件
using namespace std;

int main() {
    // 2. 添加这一行：设置控制台输出代码页为 UTF-8
    SetConsoleOutputCP(65001);
    // == 的优先级高于按位与(&)
    int n = (1 & 0) == 1;
    cout << "运算后结果："  << n << endl;
    return 0;
}
```
![[Pasted image 20260223160610.png]]
## 📚 参考资料
- `SetConsoleOutputCP` 是 **Windows API 函数**，用于设置控制台（命令行窗口）的**输出代码页（Code Page）**，即控制台中文字的编码格式。
函数原型为：
```cpp
BOOL SetConsoleOutputCP( 
	UINT wCodePageID // 要设置的代码页 ID 
);
```

| 部分  | 说明                                       |
| --- | ---------------------------------------- |
| 返回值 | `BOOL` - 成功返回非零值，失败返回 0                  |
| 参数  | `wCodePageID` - 代码页标识符（如 65001 代表 UTF-8） |
```text
┌─────────────────────────────────────────────────────────┐ 
│                    程序执行流程                          │ 
├─────────────────────────────────────────────────────────┤ 
│ 1. 源代码保存为 UTF-8 编码                               │ 
│ 2. 编译器将中文字符串编译为 UTF-8 字节序列                 │ 
│ 3. 程序运行时输出 UTF-8 字节到控制台                      │ 
│ 4. SetConsoleOutputCP(65001) 告诉控制台按 UTF-8 解析     │ 
│ 5. 控制台正确显示中文                                     │ 
└─────────────────────────────────────────────────────────┘
```
 不使用 SetConsoleOutputCP 的问题:
 ```text
源代码 (UTF-8) → 编译 → 输出字节 → 控制台 (GBK) 
"你好" → 0xE4 0xBD 0xA0... → 解析为 GBK → 乱码
 ```
使用 SetConsoleOutputCP 后:
```text
源代码 (UTF-8) → 编译 → 输出字节 → 控制台 (UTF-8) 
"你好" → 0xE4 0xBD 0xA0... → 解析为 UTF-8 → 正常显示
```

- [链接2]()

## 🎯 经验总结
<!-- 记录本次调试的收获和避免复现的方法 -->
- 多使用英文调试
- 
- 

## 📎 附件
- [x] 相关截图 ✅ 2026-02-23
- [ ] 日志文件
- [x] 代码片段 ✅ 2026-02-23

---
**最后更新**: 2026-02-23 12:26
## 解决状态
- [ ] ⬜ 未解决
- [ ] 🟠 进行中
- [ ] 🟡 部分解决
- [x] 🟢 已解决 ✅ 2026-02-23